var ResolutionPolicy={FIXED_WIDTH:1,FIXED_HEIGHT:2,NO_BORDER:3},OrientationPolicy={LANDSCAPE:1,PORTRAIT:2,AUTO:3},Stage=function(i,t){return this.id=i||"root",this.option=t||{},this.width=this.option.width||640,this.height=this.option.height||1008,this.designWidth=this.option.designWidth||this.width,this.designHeight=this.option.designHeight||this.height,this.safeWidth=this.option.safeWidth||this.width,this.safeHeight=this.option.safeHeight||this.height,this.zIndex=this.option.zIndex||1,this.orientationPolicy=this.option.orientation||OrientationPolicy.AUTO,this.resolutionPolicy=this.option.resolution||ResolutionPolicy.NO_BORDER,this.elementParent=this.option.parent||document.body,this.element=document.getElementById(this.id),this.resizeCallbackArr=[],this.resizeIntervalId=null,this.w=this.width,this.h=this.height,this.s=1,this.canResize=!0,this.init(),this};Stage.prototype={init:function(){var i=this;this.setElement(),this.resize(),window.addEventListener("resize",function(){i.resize()}),this.element.addEventListener("touchmove",function(i){i.preventDefault()})},setElement:function(){this.element||(this.element=document.createElement("div"),this.element.id=this.id,this.elementParent.appendChild(this.element));var i=this.element.style;i.position="absolute",i.top="0",i.left="0",i.zIndex=this.zIndex},setResizeCallback:function(i){"function"==typeof i&&this.resizeCallbackArr.push(i)},resizeDelay:function(){var i=window.innerWidth,t=window.innerHeight,s=this.element.style,e=i/t>(i>t?this.height/this.width:this.width/this.height),h=!0,n=ResolutionPolicy.FIXED_WIDTH,o=ResolutionPolicy.FIXED_HEIGHT;this.resolutionPolicy instanceof Array?(o=this.resolutionPolicy[0],n=this.resolutionPolicy[1]):(o=this.resolutionPolicy,n=this.resolutionPolicy);var l="";if(i>t){switch(n){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=e}h?(this.s=i/this.height,this.w=this.height,this.h=t/this.s,this.h<this.safeWidth&&(this.s=t/this.safeWidth,this.h=this.safeWidth,this.w=i/this.s)):(this.s=t/this.width,this.h=this.width,this.w=i/this.s,this.w<this.safeHeight&&(this.s=i/this.safeHeight,this.w=this.safeHeight,this.h=t/this.s)),l="rotate(-90deg) translate("+-(this.h+this.designWidth)*this.s/2+"px,"+(this.w-this.designHeight)*this.s/2+"px) scale("+this.s+")"}else{switch(o){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=e}h?(this.s=i/this.width,this.w=this.width,this.h=t/this.s,this.h<this.safeHeight&&(this.s=t/this.safeHeight,this.h=this.safeHeight,this.w=i/this.s)):(this.s=t/this.height,this.h=this.height,this.w=i/this.s,this.w<this.safeWidth&&(this.s=i/this.safeWidth,this.w=this.safeWidth,this.h=t/this.s)),l="translate("+(this.w-this.designWidth)*this.s/2+"px,"+(this.h-this.designHeight)*this.s/2+"px) scale("+this.s+")"}s.transform=l,s.webkitTransform=l,s.transformOrigin="0 0",s.webkitTransformOrigin="0 0";for(var a=0;a<this.resizeCallbackArr.length;a++){var r=this.resizeCallbackArr[a];r&&r()}},resize:function(){var i=this;this.resizeIntervalId&&clearTimeout(this.resizeIntervalId),this.canResize&&(this.resizeIntervalId=setTimeout(function(){i.resizeDelay()},100))},setResize:function(i){this.canResize=!!i},setZ:function(i){this.element.style.zIndex=i},show:function(){this.element.style.display="block",this.element.style.opacity=1},hide:function(){this.element.style.display="none",this.element.style.opacity=0}};