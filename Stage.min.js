var ResolutionPolicy={FIXED_WIDTH:1,FIXED_HEIGHT:2,NO_BORDER:3},Stage=function(t,i){return this.id=t||"root",this.option=i||{},this.width=this.option.width||640,this.height=this.option.height||1008,this.designWidth=this.option.designWidth||this.width,this.designHeight=this.option.designHeight||this.height,this.safeWidth=this.option.safeWidth||this.width,this.safeHeight=this.option.safeHeight||this.height,this.zIndex=this.option.zIndex||1,this.resolutionPolicy=this.option.resolutionPolicy||ResolutionPolicy.NO_BORDER,this.elementParent=this.option.parent||document.body,this.element=document.getElementById(this.id),this.resizeCallbackArr=[],this.resizeIntervalId=null,this.w=this.width,this.h=this.height,this.canResize=!0,this.init(),this};Stage.prototype={init:function(){var t=this;this.setElement(),this.resize(),window.addEventListener("resize",function(){t.resize()}),this.element.addEventListener("touchmove",function(t){t.preventDefault()})},setElement:function(){this.element||(this.element=document.createElement("div"),this.element.id=this.id,this.elementParent.appendChild(this.element));var t=this.element.style;t.position="absolute",t.top=0,t.left=0,t.zIndex=this.zIndex},setResizeCallback:function(t){"function"==typeof t&&this.resizeCallbackArr.push(t)},resizeDelay:function(){var t=window.innerWidth,i=window.innerHeight,e=this.element.style,s=t/i>(t>i?this.height/this.width:this.width/this.height),h=!0,n=ResolutionPolicy.FIXED_WIDTH,o=ResolutionPolicy.FIXED_HEIGHT;this.resolutionPolicy instanceof Array?(o=this.resolutionPolicy[0],n=this.resolutionPolicy[1]):(o=this.resolutionPolicy,n=this.resolutionPolicy);var l="";if(t>i){switch(n){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=s}if(h){a=t/this.height;this.w=this.height,this.h=i/a,l="rotate(90deg) translate("+(-this.width*a+i)/2+"px,"+-t+"px) scale("+a+")"}else{a=i/this.width;this.h=this.width,this.w=t/a,l="rotate(90deg) translate(0px,"+(-t-this.height*a)/2+"px) scale("+a+")"}}else{switch(o){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=s}if(h){a=t/this.width;this.w=this.width,this.h=i/a,this.h<this.safeHeight?(a=i/this.safeHeight,this.h=this.safeHeight,this.w=t/a,l="translate("+(t-this.designWidth*a)/2+"px,"+-(this.designHeight-this.safeHeight)*a/2+"px) scale("+a+")"):l="translate("+-(this.designWidth-this.width)*a/2+"px,"+(i-this.height*a)/2+"px) scale("+a+")"}else{var a=i/this.height;this.h=this.height,this.w=t/a,this.w<this.safeWidth?(a=t/this.safeWidth,this.w=this.safeWidth,this.h=i/a,l="translate("+-(this.designWidth-this.safeWidth)*a/2+"px,"+(i-this.height*a)/2+"px) scale("+a+")"):l="translate("+(t-this.designWidth*a)/2+"px,0px) scale("+a+")"}}e.transform=l,e.webkitTransform=l,e.transformOrigin="0 0",e.webkitTransformOrigin="0 0";for(var r=0;r<this.resizeCallbackArr.length;r++){var d=this.resizeCallbackArr[r];d&&d()}},resize:function(){var t=this;if(this.resizeIntervalId&&clearTimeout(this.resizeIntervalId),this.canResize){window.innerWidth,window.innerHeight;this.resizeIntervalId=setTimeout(function(){t.resizeDelay()},100)}},setZ:function(t){this.element.style.zIndex=t},show:function(){this.element.style.display="block",this.element.style.opacity=1},hide:function(){this.element.style.display="none",this.element.style.opacity=0}};