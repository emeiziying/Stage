var ResolutionPolicy={FIXED_WIDTH:1,FIXED_HEIGHT:2,NO_BORDER:3},OrientationPolicy={LANDSCAPE:1,PORTRAIT:2,AUTO:3},Stage=function(t,i){return this.id=t||"root",this.option=i||{},this.width=this.option.width||640,this.height=this.option.height||1008,this.designWidth=this.option.designWidth||this.width,this.designHeight=this.option.designHeight||this.height,this.safeWidth=this.option.safeWidth||this.width,this.safeHeight=this.option.safeHeight||this.height,this.zIndex=this.option.zIndex||1,this.orientationPolicy=this.option.orientation||OrientationPolicy.AUTO,this.resolutionPolicy=this.option.resolution||ResolutionPolicy.NO_BORDER,this.elementParent=this.option.parent||document.body,this.element=document.getElementById(this.id),this.resizeCallbackArr=[],this.resizeIntervalId=null,this.w=this.width,this.h=this.height,this.x=0,this.y=0,this.scale=1,this.canResize=!0,this.init(),this};Stage.prototype={init:function(){var t=this;this.setElement(),this.resize(),window.addEventListener("resize",function(){t.resize()}),this.element.addEventListener("touchmove",function(t){t.preventDefault()})},setElement:function(){this.element||(this.element=document.createElement("div"),this.element.id=this.id,this.elementParent.appendChild(this.element));var t=this.element.style;t.position="absolute",t.top="0",t.left="0",t.zIndex=this.zIndex},setResizeCallback:function(t){"function"==typeof t&&this.resizeCallbackArr.push(t)},resizeDelay:function(){var t=window.innerWidth,i=window.innerHeight,s=this.element.style,e=t/i>(t>i?this.h/this.w:this.w/this.h),h=!0,n=ResolutionPolicy.FIXED_WIDTH,o=ResolutionPolicy.FIXED_HEIGHT;this.resolutionPolicy instanceof Array?(o=this.resolutionPolicy[0],n=this.resolutionPolicy[1]):(o=this.resolutionPolicy,n=this.resolutionPolicy);var l="";if(t>i){switch(n){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=e}h?(this.scale=t/this.h,this.width=this.h,this.height=i/this.scale,this.height<this.safeWidth&&(this.scale=i/this.safeWidth,this.height=this.safeWidth,this.width=t/this.scale)):(this.scale=i/this.w,this.height=this.w,this.width=t/this.scale,this.width<this.safeHeight&&(this.scale=t/this.safeHeight,this.width=this.safeHeight,this.height=i/this.scale)),this.x=(this.height-this.designWidth)/2,this.y=(this.width-this.designHeight)/2,l="rotate(-90deg) translate("+(-this.height+this.x)*this.scale+"px,"+this.y*this.scale+"px) scale("+this.scale+")"}else{switch(o){case ResolutionPolicy.FIXED_WIDTH:h=!0;break;case ResolutionPolicy.FIXED_HEIGHT:h=!1;break;case ResolutionPolicy.NO_BORDER:h=e}h?(this.scale=t/this.w,this.width=this.w,this.height=i/this.scale,this.height<this.safeHeight&&(this.scale=i/this.safeHeight,this.height=this.safeHeight,this.width=t/this.scale)):(this.scale=i/this.h,this.height=this.h,this.width=t/this.scale,this.width<this.safeWidth&&(this.scale=t/this.safeWidth,this.width=this.safeWidth,this.height=i/this.scale)),this.x=(this.width-this.designWidth)/2,this.y=(this.height-this.designHeight)/2,l="translate("+this.x*this.scale+"px,"+this.y*this.scale+"px) scale("+this.scale+")"}s.transform=l,s.webkitTransform=l,s.transformOrigin="0 0",s.webkitTransformOrigin="0 0";for(var a=0;a<this.resizeCallbackArr.length;a++){var c=this.resizeCallbackArr[a];c&&c()}},getSize:function(){return{width:this.width,height:this.height}},getRect:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},resize:function(){var t=this;this.resizeIntervalId&&clearTimeout(this.resizeIntervalId),this.canResize&&(this.resizeIntervalId=setTimeout(function(){t.resizeDelay()},100))},setResize:function(t){this.canResize=!!t},setZ:function(t){this.element.style.zIndex=t},show:function(){this.element.style.display="block",this.element.style.opacity=1},hide:function(){this.element.style.display="none",this.element.style.opacity=0}};